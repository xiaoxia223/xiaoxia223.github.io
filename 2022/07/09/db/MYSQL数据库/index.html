<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Mysql数据库 | georgexia</title><meta name="author" content="georgexia"><meta name="copyright" content="georgexia"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL数据库 数据库是一种特殊的文件 数据库中有特殊的存储结构 数据库有关系型和非关系型：mysql  redis mongodb mysql：做网站用 关系型数据库 redis：做缓存用 mongodb：做爬虫用   非关系型    一般数据库中列称为—&gt;字段、行称为—&gt;记录、能够唯一标记某个字段，称为主键 部分名词概念DBMS数据库管理系统(Database Managemen">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql数据库">
<meta property="og:url" content="http://example.com/2022/07/09/db/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/index.html">
<meta property="og:site_name" content="georgexia">
<meta property="og:description" content="MySQL数据库 数据库是一种特殊的文件 数据库中有特殊的存储结构 数据库有关系型和非关系型：mysql  redis mongodb mysql：做网站用 关系型数据库 redis：做缓存用 mongodb：做爬虫用   非关系型    一般数据库中列称为—&gt;字段、行称为—&gt;记录、能够唯一标记某个字段，称为主键 部分名词概念DBMS数据库管理系统(Database Managemen">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/avatar.jpeg">
<meta property="article:published_time" content="2022-07-09T01:11:43.000Z">
<meta property="article:modified_time" content="2024-03-16T04:11:53.051Z">
<meta property="article:author" content="georgexia">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/avatar.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/07/09/db/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mysql数据库',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-16 12:11:53'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="georgexia"><span class="site-name">georgexia</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Mysql数据库</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-09T01:11:43.000Z" title="发表于 2022-07-09 09:11:43">2022-07-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-16T04:11:53.051Z" title="更新于 2024-03-16 12:11:53">2024-03-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span></div></div></div><article class="post-content" id="article-container"><h3 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL数据库</h3><ul>
<li>数据库是一种特殊的文件</li>
<li>数据库中有特殊的存储结构</li>
<li>数据库有关系型和非关系型：mysql  redis mongodb<ul>
<li>mysql：做网站用 关系型数据库</li>
<li>redis：做缓存用</li>
<li>mongodb：做爬虫用   非关系型</li>
</ul>
</li>
</ul>
<p>一般数据库中列称为—&gt;字段、行称为—&gt;记录、能够唯一标记某个字段，称为主键</p>
<h4 id="部分名词概念"><a href="#部分名词概念" class="headerlink" title="部分名词概念"></a>部分名词概念</h4><h5 id="DBMS"><a href="#DBMS" class="headerlink" title="DBMS"></a>DBMS</h5><p>数据库管理系统(Database Management System)是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，简称DBMS</p>
<h5 id="RDBMS"><a href="#RDBMS" class="headerlink" title="RDBMS"></a>RDBMS</h5><p>关系数据库管理系统（Relational Database Management System：RDBMS）是指包括相互联系的逻辑组织和存取这些数据的一套程序 (数据库管理系统软件)。关系数据库管理系统就是管理关系数据库，并将数据逻辑组织的系统，是一套专门用来管理数据库的软件，navicat就是一个管理数据库的软件（RDBMS）</p>
<p>MySQL是一种开放源代码的关系型数据库管理系统（RDBMS），使用最常用的数据库管理语言–结构化查询语言（SQL）进行数据库管理。SQL 结构化查询语言，是一种用来操作RDBMS的数据库语言</p>
<h5 id="语言分类"><a href="#语言分类" class="headerlink" title="语言分类"></a>语言分类</h5><ul>
<li>SQL(Structure Query Language)：结构化查询语言</li>
<li>DML(data manipulation language)：数据操作语言     增删改查</li>
<li>DCL(data control language)：数据控制语言    用户 权限 事务</li>
<li>DDL(data defination language)：数据定义语言     管理逻辑库 数据表 视图 索引</li>
</ul>
<h5 id="SQL注意事项"><a href="#SQL注意事项" class="headerlink" title="SQL注意事项"></a>SQL注意事项</h5><ul>
<li>不区分大小写  但是字符串区分大小写</li>
<li>必须以分号;</li>
<li>空格换行没有限制 但是不能破坏语法</li>
<li>注释<ul>
<li>单行注释 #    </li>
<li>多行注释 &#x2F;* xxxxxxxxxxxxxxxx*&#x2F;</li>
</ul>
</li>
</ul>
<h5 id="DDL语句-数据定义语言"><a href="#DDL语句-数据定义语言" class="headerlink" title="DDL语句(数据定义语言)"></a>DDL语句(数据定义语言)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">创建逻辑库  CREATE DATABASE 逻辑库名称；（不要用中文）</span><br><span class="line">查询现存逻辑空间  SHOW DATABASES;</span><br><span class="line">删除某逻辑空间 DROP DATABASE 逻辑库名称；</span><br><span class="line"></span><br><span class="line">创建数据表  CREATE TABLE 数据表(XXXXXX)</span><br><span class="line">向数据表中插入数据  INSERT INTO 表名 (xxxxx数据)</span><br><span class="line">DESC student; 查询student表的结构</span><br><span class="line">SHOW CREAT TABLE student; 查询创建student表的语句</span><br><span class="line">DROP TABLE  student;  删除student 表</span><br><span class="line"></span><br><span class="line">FLOAT浮点数会丢失精度 </span><br><span class="line">DECIMAL 可以防止精度丢失</span><br><span class="line"></span><br><span class="line">数据类型：数字</span><br><span class="line">TINYINT		1字节	小整数</span><br><span class="line">SMALLINT	2字节	普通整数</span><br><span class="line">MEDIUMINT	3字节	普通整数</span><br><span class="line">INT		4字节	较大整数</span><br><span class="line">BIGINT		8字节	大整数</span><br><span class="line">FLOAT		4字节	单精度浮点数</span><br><span class="line">DOUBLE		8字节	双精度浮点数</span><br><span class="line">DECIMAL		-----	DECIMAL(10,2)  精确小数类型  不会导致精度丢失</span><br><span class="line">DECIMAL 按照字符串的方式保存 不存在10进制转2进制  不会精度丢失</span><br><span class="line">DECIMAL(10,2)  10 表示 整数位加上小数位总共10位  2 表示精确到小数点后两位</span><br><span class="line"></span><br><span class="line">数据类型 ：字符串</span><br><span class="line">CHAR		1-255字符     	固定长度字符</span><br><span class="line">VARCHAR	1-65535字符 	不固定长度字符</span><br><span class="line">TEXT		1-65535字符	不确定长度字符</span><br><span class="line">MEDIUMTEXT	1-1千6百万字符	不确定长度字符</span><br><span class="line">LONGTEXT	1-42亿字符	不确定长度字符</span><br><span class="line"></span><br><span class="line">数据类型：日期类型（特殊字符串  需要加上引号 年月日需要用横线分割）</span><br><span class="line">DATE		3字节	日期</span><br><span class="line">TIME		3字节	时间</span><br><span class="line">YEAR		1字节	年份</span><br><span class="line">DATETIME	8字节	日期时间</span><br><span class="line">TIMESTAMP	4字节    	时间戳</span><br><span class="line"></span><br><span class="line">修改表结构（都需要用ALTER TABLE +表名称 开头）</span><br><span class="line">修改字段 先写上 ALTER TABLE 表名称  不用加分号</span><br><span class="line">添加字段 ADD（添加）   XXXXX</span><br><span class="line">修改字段 MODIFY（修改）XXXX</span><br><span class="line">修改字段名字  CHANGE（修改名字）</span><br><span class="line">删除字段 DROP</span><br></pre></td></tr></table></figure>

<h3 id="数据库的范式（6个范式）（即一些规则）"><a href="#数据库的范式（6个范式）（即一些规则）" class="headerlink" title="数据库的范式（6个范式）（即一些规则）"></a>数据库的范式（6个范式）（即一些规则）</h3><ul>
<li>第一范式：原子性（不可再分）</li>
<li>第二范式：唯一性（必须有一个字段是唯一的 即主键列）</li>
<li>第三范式：关联性（每列都与主键有直接关系）</li>
</ul>
<blockquote>
<p>一般情况下只满足第三范式即可</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">字段约束</span><br><span class="line">主键约束  PRIMARY KEY    字段值唯一，且不能为NULL</span><br><span class="line">非空约束  NOT NULL         字段值不能为NULL</span><br><span class="line">唯一约束  UNIQUE             字段值唯一，且可以为NULL</span><br><span class="line">外键约束  FOREIGN KEY   保持关联数据的逻辑性</span><br><span class="line"></span><br><span class="line">ENUM(&quot;男&quot;,“女”)    枚举类型   只能从中挑选一个</span><br></pre></td></tr></table></figure>

<h3 id="索引机制"><a href="#索引机制" class="headerlink" title="索引机制"></a>索引机制</h3><blockquote>
<p>提高查询效率  但不是越多越好</p>
</blockquote>
<h5 id="如何创建索引"><a href="#如何创建索引" class="headerlink" title="如何创建索引"></a>如何创建索引</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名称(</span><br><span class="line">....,</span><br><span class="line">INDEX  &#123;索引名称&#125;（字段），  规定索引名字就用规定名字 没有规定名字就会用字段名字</span><br><span class="line">.....，</span><br><span class="line">)；</span><br><span class="line"></span><br><span class="line">CREATE TABLE t_message(</span><br><span class="line">	id INT UNSIGNED PRIMARY KEY,</span><br><span class="line">	content VARCHAR(200) NOT NULL,</span><br><span class="line">	type ENUM(&quot;公告&quot;,&quot;通告&quot;,&quot;个人通知&quot;) NOT NULL,</span><br><span class="line">	creat_time TIMESTAMP NOT NULL,</span><br><span class="line">	INDEX idx_type (type)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="如何添加或者删除索引"><a href="#如何添加或者删除索引" class="headerlink" title="如何添加或者删除索引"></a>如何添加或者删除索引</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">添加索引</span><br><span class="line">CREATE INDEX 索引名称 ON 表名（字段）;</span><br><span class="line">或者</span><br><span class="line">ALTER TABLE 表名称 ADD INDEX [索引名]（字段）;</span><br><span class="line"></span><br><span class="line">CREATE INDEX idx_type ON t_message(type);</span><br><span class="line">ALTER TABLE t_message ADD INDEX idx_type(type);</span><br></pre></td></tr></table></figure>

<h5 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHOW INDEX FROM 表名;</span><br><span class="line">SHOW INDEX FROM t_message;</span><br></pre></td></tr></table></figure>

<h5 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX 索引名称 ON 表名； </span><br><span class="line">DROP INDEX idx_type ON t_message;</span><br></pre></td></tr></table></figure>

<h5 id="索引使用原则"><a href="#索引使用原则" class="headerlink" title="索引使用原则"></a>索引使用原则</h5><ol>
<li>数据量很大 而且经常被查询的数据表可以设置索引</li>
<li>索引值添加在经常被用在检索条件的字段上边</li>
<li>不要在大字段上创建索引</li>
</ol>
<h3 id="查询语句"><a href="#查询语句" class="headerlink" title="查询语句"></a>查询语句</h3><p>最基本的查询语句是由 SELECT和FROM 关键字组成的</p>
<p>SELECT XXX  FROM XXX</p>
<h5 id="数据分页（limit关键字）"><a href="#数据分页（limit关键字）" class="headerlink" title="数据分页（limit关键字）"></a>数据分页（limit关键字）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LIMIT 关键字</span><br><span class="line">SELECT ..... FROM ..... LIMIT 起始位置，偏移量;  </span><br><span class="line">（即从起始位置开始往后查询偏移量个数据 ）</span><br><span class="line"></span><br><span class="line">SELECT empno,ename FROM t_emp LIMIT 0,5;</span><br><span class="line"></span><br><span class="line">例如 SELECT .... FROM XXXX LIMIT  0,10  从开始位置往后取10个</span><br><span class="line">如果只有 SELECT .... FROM ..... LIMIT 10    也是从开始位置 往后取10个</span><br><span class="line"></span><br><span class="line">优先级  FROM-&gt;SELECT-&gt;LIMIT</span><br></pre></td></tr></table></figure>

<h5 id="结果集排序-（ORDER-BY-子句）"><a href="#结果集排序-（ORDER-BY-子句）" class="headerlink" title="结果集排序  （ORDER BY 子句）"></a>结果集排序  （ORDER BY 子句）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT .... FROM .... ORDER BY 列名 [ASC|DESC]（ASC升序|DESC降序）</span><br><span class="line"></span><br><span class="line">SELECT empno,ename,sal,deptno FROM t_emp ORDER BY sal DESC/ASC;</span><br><span class="line"></span><br><span class="line">什么都不写默认升序</span><br><span class="line"></span><br><span class="line">不管什么内容的字段  都是可以排序的</span><br><span class="line">可以规定多个排序条件 </span><br><span class="line">数据库执行是先按照第一个字段排序 相同的话 在按照第二个字段排序 以此类推</span><br><span class="line"></span><br><span class="line">优先级  FROM-&gt;SELECT-&gt;ORDER BY-&gt;LIMIT</span><br></pre></td></tr></table></figure>

<h5 id="去除结果集中的重复记录（distinct）"><a href="#去除结果集中的重复记录（distinct）" class="headerlink" title="去除结果集中的重复记录（distinct）"></a>去除结果集中的重复记录（distinct）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT 字段 FROM.....;  （DISTINCT）</span><br><span class="line">SELECT DISTINCT job FROM t_emp;</span><br><span class="line"></span><br><span class="line">DISTINCT注意事项</span><br><span class="line">使用DISTINCT的SELECT子句只能查询一列数据</span><br><span class="line">DISTINCT 关键字只能在SELECT子句中使用一次  并且一定要放在前面</span><br><span class="line">（即SELECT 后 紧跟DISTINCT ）</span><br><span class="line">即不能同时去除多个字段的重复数据</span><br><span class="line">(不可以SELECT DISTINCT job, ename FROM t_emp;)</span><br></pre></td></tr></table></figure>

<h5 id="条件查询（WHERE-子句）"><a href="#条件查询（WHERE-子句）" class="headerlink" title="条件查询（WHERE 子句）"></a>条件查询（WHERE 子句）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">WHERE 子句注意事项</span><br><span class="line">---------------&gt;&gt;&gt;&gt;&gt;（应该把包含索引或者筛选记录最多的条件写在最左侧）</span><br><span class="line">SELECT ..... FROM ...... WHERE 条件 AND/OR 条件 .....;</span><br><span class="line">SELECT empno,ename,sal FROM t_emp </span><br><span class="line">WHERE deptno=10 AND sal&gt;=2000;</span><br></pre></td></tr></table></figure>

<h5 id="数字与null值的运算-全为null"><a href="#数字与null值的运算-全为null" class="headerlink" title="数字与null值的运算 全为null"></a>数字与null值的运算 全为null</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(null,0)  如果null  则返回0</span><br><span class="line">DATEDIFF(NOW(),hiredate)  DATEDIFF 计算时间差语句</span><br><span class="line">NOW()可以显示当前时间日期</span><br><span class="line">强制舍去位   SELECT FLOOR(28.9);-------&gt;28</span><br><span class="line">强制进位       SELECT CEIL(1.1); -----------&gt;1</span><br><span class="line">ROUND 函数  四舍五入</span><br></pre></td></tr></table></figure>

<h5 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h5><ul>
<li>IN 表示包含  deptno（10,20,30）包含10,20,30部门的</li>
<li>IS NULL	为空	comm IS NULL</li>
<li>IS NOT NULL  不为空  comm IS NOT NULL</li>
<li>BETWEEN AND 范围   sal BETWEEN 2000 AND 3000</li>
<li>LIKE    模糊查询      ename LIKE  “A%”  %代表0到多个字符  表示以A开头任意结尾</li>
<li>REGEXP  正则表达式   ename REGEXP “[a-zA-Z]{4}”<ul>
<li>^字符串开头  $字符串结尾</li>
<li>ename REGEXP “^[\u4e00-\u9fa5]{2,4}$”; 中文字符  字符串开头占位符为^  字符串结尾占位符 $</li>
</ul>
</li>
</ul>
<h5 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h5><ul>
<li>AND	与关系	age&gt;18 AND sex&#x3D;”男”</li>
<li>OR	或关系	empno&#x3D;8000 OR deptno&#x3D;20</li>
<li>NOT	非关系	NOT deptno&#x3D;20</li>
<li>XOR	异或关系	age&gt;18 XOR sex&#x3D;”男”  同为TRUE 异为FALSE</li>
</ul>
<h5 id="二进制按位运算"><a href="#二进制按位运算" class="headerlink" title="二进制按位运算"></a>二进制按位运算</h5><p>SELECT 3&amp;7  二进制的按位运算  0011&amp;0111<br>按位运算符号</p>
<ul>
<li>&amp;	位与关系	3&amp;7</li>
<li>|	位或关系	3|7</li>
<li>~	位取反	~10</li>
<li>^	位异或	3^7</li>
<li>&lt;&lt;	左移	10 &lt;&lt;1</li>
<li>&gt;&gt;    右移	10 &gt;&gt;1</li>
</ul>
<blockquote>
<p>优先级：from-&gt;where-&gt;select-&gt;order by-&gt;limit </p>
</blockquote>
<h5 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h5><ul>
<li>SUM</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SUM函数用于求和 只能用于数字类型 字符类型统计结果为0 </span><br><span class="line">日期类型统计结果是毫秒数相加</span><br><span class="line">SELECT SUM(sal) FROM t_emp;</span><br></pre></td></tr></table></figure>

<ul>
<li>MAX</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># MAX函数用于获得非空的最大值 </span><br><span class="line">SELECT MAX（comm）FROM t_emp;</span><br></pre></td></tr></table></figure>

<ul>
<li>MIN</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MIN函数用于获得非空值的最小值</span><br><span class="line">SELECT MIN(empno) FROM t_emp;</span><br></pre></td></tr></table></figure>

<ul>
<li>AVG</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AVG函数用于获得非空值的平均值，非数字类型统计结果为0</span><br><span class="line">SELECT AVG(sal+IFNULL(comm,0)) FROM t_emp;</span><br></pre></td></tr></table></figure>

<ul>
<li>COUNT(*)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COUNT(*)用于获得包含空值的记录数</span><br><span class="line">COUNT(列名)用于获得包含非空值的记录数</span><br></pre></td></tr></table></figure>

<h5 id="分组查询（GROUP-BY）"><a href="#分组查询（GROUP-BY）" class="headerlink" title="分组查询（GROUP BY）"></a>分组查询（GROUP BY）</h5><p>通过一定的规则将一个数据划分成若干个小区域，然后针对每个小区域分别进行汇总，默认情况下  汇总函数是对全表内的数据做统计</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT deptno,AVG(sal)</span><br><span class="line">FROM t_emp GROUP BY deptno; </span><br><span class="line">将deptno分组  分别取出 每个组中的 deptno 以及 平均工资</span><br><span class="line"></span><br><span class="line">逐级分组</span><br><span class="line">SELECT deptno,job,COUNT(*),AVG(sal)</span><br><span class="line">FROM t_emp</span><br><span class="line">GROUP BY deptno,job;</span><br></pre></td></tr></table></figure>

<h5 id="在含有GROUP-BY-的子句中-SELECT-子句注意事项"><a href="#在含有GROUP-BY-的子句中-SELECT-子句注意事项" class="headerlink" title="在含有GROUP BY 的子句中 SELECT 子句注意事项"></a>在含有GROUP BY 的子句中 SELECT 子句注意事项</h5><ul>
<li><p>SELECT 子句中可以出现聚合函数（汇总函数） 或者GROUP BY子句的分组列</p>
</li>
<li><p>其他内容不可以出现</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SELECT deptno,job,COUNT(*),AVG(sal),sal （此处sal不可以出现）</span><br><span class="line">FROM t_emp</span><br><span class="line">GROUP BY deptno,job;</span><br><span class="line"></span><br><span class="line">对分组结果集再汇总 （WITH ROLLUP）</span><br><span class="line">SELECT </span><br><span class="line">	deptno,AVG(sal),SUM(sal),MAX(sal),MIN(sal),COUNT(*)</span><br><span class="line">FROM t_emp</span><br><span class="line">GROUP BY deptno WITH ROLLUP;</span><br><span class="line"></span><br><span class="line">GROUP_CONCAT函数</span><br><span class="line">可以把分组查询的某个字段拼接成一个字符串</span><br><span class="line">SELECT deptno,COUNT(*),GROUP_CONCAT(ename)</span><br><span class="line">FROM t_emp</span><br><span class="line">WHERE sal&gt;=2000</span><br><span class="line">GROUP BY deptno;</span><br><span class="line">优先级 WHERE &gt; GROUP BY</span><br></pre></td></tr></table></figure>

<h5 id="HAVING-子句"><a href="#HAVING-子句" class="headerlink" title="HAVING 子句"></a>HAVING 子句</h5><p>having子句和where用途</p>
<ul>
<li><p>如果要从原表中查询结果则用 where</p>
</li>
<li><p>如果要从一查询过的结果集中查询则用having</p>
</li>
</ul>
<h5 id="踩坑注意事项"><a href="#踩坑注意事项" class="headerlink" title="踩坑注意事项"></a>踩坑注意事项</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">**聚合函数不能在WHERE子句中出现**</span><br><span class="line"></span><br><span class="line">聚合函数又称为列函数，他们都是基于整列数据进行计算的</span><br><span class="line">而WHERE子句则是对数据进行过滤的</span><br><span class="line">简单来说  聚合函数要对全列数据进行计算的前提是 “结果集已经出现”</span><br><span class="line">而where子句还处于“确定”结果集的过程中 因此不能使用聚合函数</span><br><span class="line"></span><br><span class="line">HAVING子句和where子句功能一样 都是条件过滤的</span><br><span class="line">但是having子句和groupby子句同时出现时 是先执行groupby子句的</span><br><span class="line">不会出现报错  </span><br><span class="line">并且having子句可以和聚合函数一起使用</span><br><span class="line">having子句中 聚合函数可以和具体数据做比较 例如 HAVING COUNT(*)&gt;=2;</span><br><span class="line">但不能和字段作比较 例如   HAVING COUNT(*)&gt;AVG(sal)； 这样是不允许的mq</span><br></pre></td></tr></table></figure>

<h3 id="表连接"><a href="#表连接" class="headerlink" title="表连接"></a>表连接</h3><h5 id="表连接类型"><a href="#表连接类型" class="headerlink" title="表连接类型"></a>表连接类型</h5><ul>
<li>内连接：内连接是结果集中只保留符合条件的记录</li>
<li>外连接：外连接是不用管符不符合连接条件 记录都要保存在结果集中</li>
</ul>
<h5 id="内连接多种语法形式"><a href="#内连接多种语法形式" class="headerlink" title="内连接多种语法形式"></a>内连接多种语法形式</h5><ul>
<li>SELECT ….. FROM 表1 JOIN 表2 ON 连接条件；</li>
<li>SELECT ….. FROM 表1 JOIN 表2 WHERE 连接条件；</li>
<li>SELECT ….. FROM 表1，表2 WHERE 连接条件；</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line">SELECT e.empno,e.ename,d.dname,e.sal,e.job,s.grade</span><br><span class="line">FROM t_emp e JOIN t_dept d ON e.deptno=d.deptno</span><br><span class="line">JOIN t_salgrade s ON e.sal BETWEEN s.losal AND s.hisal;</span><br><span class="line"></span><br><span class="line">优先级：from-&gt;where-&gt;select-&gt;order by-&gt;limit </span><br></pre></td></tr></table></figure>

<h5 id="外连接多种形式"><a href="#外连接多种形式" class="headerlink" title="外连接多种形式"></a>外连接多种形式</h5><ul>
<li>左外连接：保留左表的全部记录与右边连接，如果右表有符合条件的记录就与左表连接，如果没有 就用NULL与左表连接</li>
<li>右外连接：保留右表的全部记录与左表连接</li>
</ul>
<h3 id="SQL练习题"><a href="#SQL练习题" class="headerlink" title="SQL练习题"></a>SQL练习题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># 查询RESEARCH部门人数。最高底薪、最低底薪、平均底薪、平均工龄</span><br><span class="line">SELECT COUNT(*), MAX(e.sal),MIN(e.sal),AVG(e.sal),</span><br><span class="line">FLOOR(AVG(DATEDIFF(NOW(),e.hiredate)/365))</span><br><span class="line">FROM t_emp e JOIN t_dept d ON e.deptno=d.deptno</span><br><span class="line">WHERE d.dname=&quot;RESEARCH&quot;;</span><br><span class="line"></span><br><span class="line">SELECT FLOOR(28.9);</span><br><span class="line">SELECT CEIL(1.1);</span><br><span class="line"></span><br><span class="line"># 查询每种职业的最高工资、最低工资、平均工资、最高工资等级、最低工资等级</span><br><span class="line">SELECT e.job,</span><br><span class="line">MAX(e.sal+IFNULL(comm,0)),</span><br><span class="line">MIN(e.sal+IFNULL(comm,0)),</span><br><span class="line">AVG(e.sal+IFNULL(comm,0)),</span><br><span class="line">MAX(s.grade),</span><br><span class="line">MIN(s.grade)</span><br><span class="line">FROM t_emp e JOIN t_salgrade s </span><br><span class="line">ON (e.sal+IFNULL(comm,0)) BETWEEN s.losal AND s.hisal</span><br><span class="line">GROUP BY e.job;</span><br><span class="line"></span><br><span class="line"># 查询每个底薪超过部门平均底薪的员工信息</span><br><span class="line">SELECT e.empno,e.ename,e.sal</span><br><span class="line">FROM t_emp e JOIN </span><br><span class="line">(SELECT deptno,AVG(sal) AS avg FROM t_emp GROUP BY deptno) AS t</span><br><span class="line">ON e.deptno=t.deptno AND e.sal&gt;=t.avg; </span><br><span class="line"></span><br><span class="line"># 查询每个部门的名称和部门的人数</span><br><span class="line">SELECT d.dname,COUNT(e.deptno) #这里不能用COUNT(*)它包含非空值</span><br><span class="line">FROM t_dept d LEFT JOIN t_emp e</span><br><span class="line">ON d.deptno=e.deptno</span><br><span class="line">GROUP BY d.deptno; # 分组同样要用保留所有数据的表分组</span><br><span class="line"></span><br><span class="line">UNION 关键字可以将多个查询语句的结果集进行合并</span><br></pre></td></tr></table></figure>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.子查询可以写在三个地方，where子句、from子句、select子句，但是只有from子句子查询是最可取的</span><br><span class="line"></span><br><span class="line">2.where子句中每查询一次，where子查询就要筛选一次，效率特别低，select子查询同样如此，from子查询只会执行一次 所以效率很高</span><br><span class="line"></span><br><span class="line">3.单行子查询的结果只有一条记录，多行子查询结果集有多条记录，多行子查询只能出现在where子句和from子句中</span><br></pre></td></tr></table></figure>

<p>子查询练习题</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 如何用子查询查找FORD和MARTIN两个人的同事</span><br><span class="line"># <span class="keyword">where</span>子句中可以使用 <span class="keyword">IN</span><span class="operator">/</span><span class="keyword">ALL</span><span class="operator">/</span><span class="keyword">ANY</span><span class="operator">/</span>EXIST 关键字来处理多行表达式结果集的条件判断</span><br><span class="line"><span class="keyword">SELECT</span> ename</span><br><span class="line"><span class="keyword">FROM</span> t_emp</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">deptno <span class="keyword">IN</span></span><br><span class="line">(<span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> t_emp <span class="keyword">WHERE</span> ename <span class="keyword">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;))</span><br><span class="line"><span class="keyword">AND</span> ename <span class="keyword">NOT</span> <span class="keyword">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;);</span><br><span class="line"></span><br><span class="line"># 查询FORD和MARTIN底薪都高的员工信息</span><br><span class="line"><span class="keyword">SELECT</span> ename <span class="keyword">FROM</span> t_emp</span><br><span class="line"><span class="keyword">WHERE</span> sal<span class="operator">&gt;=</span><span class="keyword">ALL</span></span><br><span class="line">(<span class="keyword">SELECT</span> sal <span class="keyword">FROM</span> t_emp <span class="keyword">WHERE</span> ename <span class="keyword">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;))</span><br><span class="line"><span class="keyword">AND</span> ename <span class="keyword">NOT</span> <span class="keyword">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="INSERT-语句"><a href="#INSERT-语句" class="headerlink" title="INSERT 语句"></a>INSERT 语句</h3><ul>
<li>insert语句可以向数据表中写入记录，可以是一条记录，也可以是多条记录</li>
<li>不能够即向表中插入数据 同时又向同一张表中查询数据  不允许↓</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 不能够即向表中插入数据 同时又向同一张表中查询数据 不允许</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_dept(deptno,dname,loc)</span><br><span class="line"><span class="keyword">VALUES</span>((<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(deptno) <span class="keyword">FROM</span> t_dept)<span class="operator">+</span><span class="number">10</span>,&quot;A部门&quot;,&quot;北京&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 这么写可以</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_dept (<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(deptno)<span class="operator">+</span><span class="number">10</span>,&quot;A部门&quot;,&quot;北京&quot; <span class="keyword">FROM</span> t_dept);</span><br><span class="line"></span><br><span class="line"># 同样的 直接将结果集插入表中</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_dept </span><br><span class="line">(<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(deptno)<span class="operator">+</span><span class="number">10</span>,&quot;A部门&quot;,&quot;北京&quot; <span class="keyword">FROM</span> t_dept <span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(deptno)<span class="operator">+</span><span class="number">20</span>,&quot;B部门&quot;,&quot;上海&quot; <span class="keyword">FROM</span> t_dept)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名（字段<span class="number">1</span>，字段<span class="number">2</span>,.....）</span><br><span class="line"><span class="keyword">VALUES</span>(值<span class="number">1</span>，值<span class="number">2</span>,......)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_dept(deptno,dname,loc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">60</span>,&quot;后勤部&quot;,&quot;北京&quot;),(<span class="number">70</span>,&quot;保安部&quot;,&quot;北京&quot;);</span><br><span class="line"></span><br><span class="line"># 向技术部添加一条员工记录</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_emp(empno,ename,job,mgr,hiredate,sal,comm,deptno)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">8001</span>,&quot;刘娜&quot;,&quot;SALESMAN&quot;,<span class="number">8000</span>,&quot;1988-12-20&quot;,<span class="number">2000</span>,<span class="keyword">NULL</span>,</span><br><span class="line">(<span class="keyword">SELECT</span> deptno <span class="keyword">FROM</span> t_dept <span class="keyword">WHERE</span> dname<span class="operator">=</span>&quot;技术部&quot;));</span><br></pre></td></tr></table></figure>

<h5 id="INSERT语句方言"><a href="#INSERT语句方言" class="headerlink" title="INSERT语句方言"></a>INSERT语句方言</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">SET</span> 字段<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>，字段<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>, ......</span><br><span class="line"></span><br><span class="line"># <span class="keyword">INSERT</span>方言插入（<span class="keyword">INTO</span>可以省略）</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> （此处<span class="keyword">into</span>可以省略）t_emp</span><br><span class="line"><span class="keyword">SET</span> empno<span class="operator">=</span><span class="number">8002</span>,ename<span class="operator">=</span>&quot;MIKE&quot;,job<span class="operator">=</span>&quot;SALESMAN&quot;,mgr<span class="operator">=</span><span class="number">8000</span>,hiredate<span class="operator">=</span>&quot;1985-12-14&quot;,sal<span class="operator">=</span><span class="number">2500</span>,comm<span class="operator">=</span><span class="keyword">NULL</span>,deptno<span class="operator">=</span><span class="number">50</span>;</span><br></pre></td></tr></table></figure>

<h5 id="IGNORE关键字"><a href="#IGNORE关键字" class="headerlink" title="IGNORE关键字"></a>IGNORE关键字</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># IGNORE关键字会让<span class="keyword">INSERT</span>只插入数据库不存在的记录</span><br><span class="line"># 忽略已存在的数据 只插入不存在的记录</span><br><span class="line"><span class="keyword">INSERT</span> IGNORE <span class="keyword">INTO</span> 表名 .....;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> IGNORE <span class="keyword">INTO</span> t_dept(deptno,dname,loc)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">70</span>,&quot;A&quot;,&quot;北京&quot;),(<span class="number">80</span>,&quot;B&quot;,&quot;上海&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="update语句"><a href="#update语句" class="headerlink" title="update语句"></a>update语句</h3><p>update 语句用于修改表的记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> （ignore）表名</span><br><span class="line"><span class="keyword">SET</span> 字段<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>，字段<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,...</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">limit</span><br><span class="line"></span><br><span class="line"># <span class="keyword">update</span>语句表连接</span><br><span class="line"># 表连接<span class="keyword">UPDATE</span>语句可以修改多张表的记录</span><br><span class="line"><span class="number">1.</span><span class="keyword">UPDATE</span> 表<span class="number">1</span> <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件 <span class="keyword">SET</span> 字段<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>，字段<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>，......;</span><br><span class="line"><span class="number">2.</span><span class="keyword">UPDATE</span> 表<span class="number">1</span>，表<span class="number">2</span> <span class="keyword">SET</span> 字段<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>，字段<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>，......; <span class="keyword">WHERE</span> 连接条件；</span><br><span class="line"></span><br><span class="line"># <span class="keyword">update</span>语句练习题</span><br><span class="line"># 把每个员工编号和上司编号<span class="operator">+</span><span class="number">1</span> 用<span class="keyword">ORDER</span> <span class="keyword">BY</span> 子句完成</span><br><span class="line"><span class="keyword">UPDATE</span> t_emp <span class="keyword">SET</span> empno<span class="operator">=</span>empno<span class="operator">+</span><span class="number">1</span>,mgr<span class="operator">=</span>mgr<span class="operator">+</span><span class="number">1</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> empno <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"># 把月收入前三名的员工底薪减少<span class="number">100</span>元，用limit子句完成</span><br><span class="line"><span class="keyword">UPDATE</span> t_emp</span><br><span class="line"><span class="keyword">SET</span> sal<span class="operator">=</span>sal<span class="number">-100</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sal<span class="operator">+</span>IFNULL(comm,<span class="number">0</span>) <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"># 把ALLEN调往RESEARCH部门，职务调整为ANALYST</span><br><span class="line"><span class="keyword">UPDATE</span> t_emp e <span class="keyword">JOIN</span> t_dept d </span><br><span class="line"><span class="keyword">SET</span> e.deptno<span class="operator">=</span>d.deptno,e.job<span class="operator">=</span>&quot;ANALYST&quot;,d.loc<span class="operator">=</span>&quot;北京&quot;</span><br><span class="line"><span class="keyword">WHERE</span> e.ename<span class="operator">=</span>&quot;ALLEN&quot; <span class="keyword">AND</span> d.dname<span class="operator">=</span>&quot;RESEARCH&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="DELETE语句"><a href="#DELETE语句" class="headerlink" title="DELETE语句"></a>DELETE语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># 语法：</span><br><span class="line"><span class="keyword">DELETE</span> (IGNORE) <span class="keyword">FROM</span> 表名</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">LIMIT;</span><br><span class="line"># DELECT 语句表连接</span><br><span class="line"><span class="keyword">DELETE</span> 表<span class="number">1.</span>.....<span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">LIMIT;</span><br><span class="line"></span><br><span class="line"># <span class="keyword">delete</span>语句练习题</span><br><span class="line"># 删除<span class="number">10</span>部门中 工龄超过<span class="number">20</span>年的员工记录</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t_emp</span><br><span class="line"><span class="keyword">WHERE</span> deptno<span class="operator">=</span><span class="number">10</span> <span class="keyword">AND</span> DATEDIFF(NOW(),hiredate)<span class="operator">/</span><span class="number">365</span><span class="operator">&gt;=</span><span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"># 删除<span class="number">20</span>部门中 工资最高的员工记录</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t_emp</span><br><span class="line"><span class="keyword">WHERE</span> deptno<span class="operator">=</span><span class="number">20</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sal<span class="operator">+</span>IFNULL(comm,<span class="number">0</span>) <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"># 删除SALES部门和该部门的全部员工记录</span><br><span class="line"><span class="keyword">DELETE</span> e,d <span class="keyword">FROM</span> t_emp e <span class="keyword">JOIN</span> t_dept d</span><br><span class="line"><span class="keyword">ON</span> e.deptno<span class="operator">=</span>d.deptno</span><br><span class="line"><span class="keyword">WHERE</span> d.dname<span class="operator">=</span>&quot;SALES&quot;;</span><br><span class="line"></span><br><span class="line"># 删除每个低于部门平均底薪的员工记录</span><br><span class="line"><span class="keyword">DELETE</span> e <span class="keyword">FROM</span> t_emp e <span class="keyword">JOIN</span> </span><br><span class="line">(<span class="keyword">SELECT</span> deptno,<span class="built_in">AVG</span>(sal) avg <span class="keyword">FROM</span> t_emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno) t</span><br><span class="line"><span class="keyword">ON</span> e.deptno<span class="operator">=</span>t.deptno</span><br><span class="line"><span class="keyword">WHERE</span> e.sal<span class="operator">&lt;</span>t.avg;</span><br><span class="line"></span><br><span class="line"># 删除员工KING 和他的直接下属的员工记录 用表连接实现</span><br><span class="line"><span class="keyword">DELETE</span> e </span><br><span class="line"><span class="keyword">FROM</span> t_emp e <span class="keyword">JOIN</span> </span><br><span class="line">(<span class="keyword">SELECT</span> empno <span class="keyword">FROM</span> t_emp <span class="keyword">WHERE</span> ename<span class="operator">=</span>&quot;KING&quot;) t </span><br><span class="line"><span class="keyword">ON</span> e.mgr<span class="operator">=</span>t.empno <span class="keyword">OR</span> e.empno<span class="operator">=</span>t.empno;</span><br></pre></td></tr></table></figure>

<h3 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h3><ul>
<li>ABS    绝对值      ABS(-100)</li>
<li>ROUND  四舍五入    ROUND(4.62)</li>
<li>FLOOR  强制舍位       FLOOR(9.9)</li>
<li>CEIL    强制进位     CEIL(3.1)</li>
<li>POWER   幂函数    POWER(2,3)</li>
<li>LOG     对数函数     LOG(7,3)</li>
<li>LN       对数函数    LN(10)SQ</li>
<li>SQRT    开平方      SQLT(9)</li>
<li>PI   圆周率     PI（）</li>
<li>SIN    COS   TAN  COT     (1)   弧度</li>
<li>REDIANS  角度转弧度   RADIANS(30)</li>
<li>DEGREES  弧度转角度     DEGREES(1)</li>
</ul>
<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><ul>
<li>NOW()      获得日期+时间</li>
<li>CURDATE()  获得日期</li>
<li>CURTIME()   获得时间</li>
</ul>
<h3 id="日期格式化函数"><a href="#日期格式化函数" class="headerlink" title="日期格式化函数"></a>日期格式化函数</h3><p>DATE_FORMAT(日期，表达式)</p>
<h3 id="日期偏移函数"><a href="#日期偏移函数" class="headerlink" title="日期偏移函数"></a>日期偏移函数</h3><ul>
<li>DATE_ADD()函数k可以实现日期的偏移计算</li>
<li>DATE_ADD(日期，INTERVAL 偏移量  时间单位)</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_ADD(NOW(),<span class="type">INTERVAL</span> <span class="number">15</span> <span class="keyword">DAY</span>);</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(NOW(),<span class="type">INTERVAL</span> <span class="number">300</span> <span class="keyword">MINUTE</span>);</span><br></pre></td></tr></table></figure>

<h3 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 相当于字符串切割</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(&quot;你好&quot;,<span class="number">1</span>,<span class="number">1</span>,&quot;先生&quot;);      <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;&gt;</span><span class="operator">&gt;&gt;</span>     先生好</span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(&quot;你好先生&quot;,&quot;先生&quot;,&quot;小姐&quot;);   <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;&gt;</span><span class="operator">&gt;&gt;</span>  你好小姐</span><br><span class="line"># SUBSTR(&quot;你好世界&quot;,<span class="number">3</span>,<span class="number">4</span>)  <span class="number">3</span> 为开始位置(世) <span class="number">4</span> 为结束位置(界)</span><br><span class="line"># <span class="built_in">SUBSTRING</span> (&quot;你好世界&quot;,<span class="number">3</span>,<span class="number">2</span>)   <span class="number">3</span> 为开始位置(世)   <span class="number">2</span> 为偏移量  往后偏移两位  </span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(&quot;你好世界&quot;,<span class="number">3</span>,<span class="number">4</span>),<span class="built_in">SUBSTRING</span>(&quot;你好世界&quot;,<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">SELECT</span> LPAD(<span class="built_in">SUBSTRING</span>(<span class="number">13233824866</span>,<span class="number">8</span>,<span class="number">4</span>),<span class="number">11</span>,&quot;*&quot;);   <span class="number">11</span> 为总字符个数  其他字符用<span class="operator">*</span><span class="operator">*</span>填充</span><br><span class="line"><span class="keyword">SELECT</span> RPAD(<span class="built_in">SUBSTRING</span>(&quot;李晓娜&quot;,<span class="number">1</span>,<span class="number">1</span>),LENGTH(&quot;李晓娜&quot;)<span class="operator">/</span><span class="number">3</span>,&quot;*&quot;);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(&quot;       HELLO WORLD      &quot;);</span><br></pre></td></tr></table></figure>

<h3 id="数据库的事务机制"><a href="#数据库的事务机制" class="headerlink" title="数据库的事务机制"></a>数据库的事务机制</h3><ul>
<li>避免写入直接操作数据文件</li>
<li>利用日志来实现间接写入</li>
<li>MYSQL 数据库共有5中数据文件 其中redo日志和undo日志与事务有关</li>
<li>undo日志保存 被操作的记录   redo 记录增删改查的操作</li>
</ul>
<h5 id="事务机制-transaction"><a href="#事务机制-transaction" class="headerlink" title="事务机制(transaction)"></a>事务机制(transaction)</h5><ul>
<li><p>RDBMS&#x3D;SQL+ 事务(ACID属性)</p>
</li>
<li><p>事务是一个或者多个SQL语句组成的整体，要么全部执行成功，要么全部执行失败。</p>
</li>
</ul>
<h5 id="管理事务"><a href="#管理事务" class="headerlink" title="管理事务"></a>管理事务</h5><p>默认情况下，mysql执行每条sql语句都会自动开启和提交事务</p>
<p>为了让多条sql语句纳入到一个事务之下，可以手动管理事务</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">SQL</span>语句</span><br><span class="line"><span class="keyword">COMMIT</span>(持久化 提交) <span class="operator">/</span> <span class="keyword">ROLLBACK</span>(回滚);</span><br><span class="line"><span class="keyword">COMMIT</span> 提交操作 同步文件操作 </span><br><span class="line"><span class="keyword">ROLLBACK</span> 只保存操作  不同步</span><br></pre></td></tr></table></figure>

<h5 id="事务的ACID属性"><a href="#事务的ACID属性" class="headerlink" title="事务的ACID属性"></a>事务的ACID属性</h5><blockquote>
<p>原子性，一致性，隔离性，持久性</p>
</blockquote>
<ul>
<li>原子性：一个事务中，所有操作要么全部成功，要么全部失败。不存在中间状态。</li>
<li>一致性：事务在并发的情况下不会出现歧义 保证运行结果的一致性</li>
<li>隔离性：事务不受其他并发事务的影响</li>
<li>持久性：事务一旦提交，结果便是永久性的，即便发生宕机，依然可以依靠事务日志完成数据持久化</li>
</ul>
<h2 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#修改隔离级别语句</span><br><span class="line"><span class="keyword">SET</span> SESSION TRANSACTION ISOLATION LEVEL  <span class="operator">+</span> 级别</span><br><span class="line">read uncommitted 可以读取其他未提交的临时数据  适用于买票机制</span><br><span class="line">read committed   只能读取其他已经提交的数据    </span><br><span class="line">repeatable read 代表事务在执行中反复读取数据  得到的结果是一致的 不受其他事务影响 并且 为默认隔离级别</span><br><span class="line">serializable  序列化执行事务  前一个事务没有执行完毕之前 后一个事务不会进行</span><br></pre></td></tr></table></figure>

<h5 id="数据导出与备份的区别"><a href="#数据导出与备份的区别" class="headerlink" title="数据导出与备份的区别"></a>数据导出与备份的区别</h5><ul>
<li><p>数据导出 ，导出的纯粹是业务数据</p>
</li>
<li><p>数据备份， 备份的是数据文件、日志文件、索引文件等</p>
</li>
</ul>
<h5 id="数据导出导入"><a href="#数据导出导入" class="headerlink" title="数据导出导入"></a>数据导出导入</h5><p>导出导入分类 ： SQL文档  和 文本文档</p>
<ul>
<li>当数据量较小时  导入导出成SQL文件 sql文件里只有sql语句</li>
<li>当数据量较大时 导入导出成文本文档  文本文档里面只有纯粹的数据</li>
<li>跳过词法分析 速度很快  另外文本文档比sq文档小很多</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 首先要导入表结构 然后导入数据</span><br><span class="line"></span><br><span class="line">mysqldump  # 用于把业务数据导出成<span class="keyword">SQL</span>文件 其中也包括了表结构</span><br><span class="line"></span><br><span class="line">导出为<span class="keyword">sql</span>文件命令：mysql<span class="operator">&gt;</span> mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>p [<span class="keyword">no</span><span class="operator">-</span>data] 逻辑库 <span class="operator">&gt;</span> 路径;</span><br><span class="line">导入为<span class="keyword">sql</span>文件命令：mysql<span class="operator">&gt;</span> use 数据库名;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> source 需要导入的<span class="keyword">sql</span>文件;</span><br></pre></td></tr></table></figure>

<h3 id="mysql与python交互"><a href="#mysql与python交互" class="headerlink" title="mysql与python交互"></a>mysql与python交互</h3><p>mysql-connector官方驱动模块</p>
<p>创建连接   获取游标对象 执行sql语句 关闭游标对象  关闭连接</p>
<h5 id="创建连接"><a href="#创建连接" class="headerlink" title="创建连接"></a>创建连接</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line">con = mysql.connector.connect(</span><br><span class="line">    host=<span class="string">&quot;localhost&quot;</span>, port=<span class="string">&quot;3306&quot;</span>,</span><br><span class="line">    user=<span class="string">&quot;root&quot;</span>, password=<span class="string">&quot;dx991108..&quot;</span>,</span><br><span class="line">    database=<span class="string">&quot;demo&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h5 id="游标-cursor"><a href="#游标-cursor" class="headerlink" title="游标(cursor)"></a>游标(cursor)</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql connector 中的游标用来执行sql语句  查询的结果集也是保存在游标里面的 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建游标</span></span><br><span class="line">cursor = con.cursor()</span><br><span class="line">cursor.execute(sql语句) 执行sql语句</span><br><span class="line">cursor = con.cursor()</span><br><span class="line">sql = <span class="string">&quot;SELECT empno, ename, hiredate FROM t_emp;&quot;</span></span><br><span class="line">cursor.execute(sql)</span><br><span class="line"><span class="keyword">for</span> one <span class="keyword">in</span> cursor:</span><br><span class="line">    <span class="built_in">print</span>(one[<span class="number">0</span>], one[<span class="number">1</span>], one[<span class="number">2</span>])</span><br><span class="line">con.close()</span><br></pre></td></tr></table></figure>

<h5 id="connector提供的事务控制函数-必须手动提交事务"><a href="#connector提供的事务控制函数-必须手动提交事务" class="headerlink" title="connector提供的事务控制函数(必须手动提交事务)"></a>connector提供的事务控制函数(必须手动提交事务)</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">con.start_transaction( 事务的隔离级别)</span><br><span class="line">con.commit()</span><br><span class="line">con.rollback()</span><br></pre></td></tr></table></figure>

<h5 id="数据库连接技术意义（Connection-Pool）"><a href="#数据库连接技术意义（Connection-Pool）" class="headerlink" title="数据库连接技术意义（Connection Pool）"></a>数据库连接技术意义（Connection Pool）</h5><p>数据库连接池 预先创建出一些数据库连接，然后缓存起来，避免程序语言反复创建和销毁连接的昂贵代价</p>
<h5 id="数据库连接池语法"><a href="#数据库连接池语法" class="headerlink" title="数据库连接池语法"></a>数据库连接池语法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector.pooling</span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="string">&quot;port&quot;</span>: <span class="number">3306</span>,</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;dx991108..&quot;</span>,</span><br><span class="line">    <span class="string">&quot;database&quot;</span>: <span class="string">&quot;demo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    pool = mysql.connector.pooling.MySQLConnectionPool(</span><br><span class="line">        **config,</span><br><span class="line">        pool_size=<span class="number">10</span></span><br><span class="line">    )</span><br><span class="line">    con = pool.get_connection()</span><br><span class="line">    con.start_transaction()</span><br><span class="line">    cursor = con.cursor()</span><br><span class="line">    sql = <span class="string">&quot;UPDATE t_emp SET sal=sal+%s WHERE deptno=%s&quot;</span></span><br><span class="line">    cursor.execute(sql, (<span class="number">200</span>, <span class="number">20</span>))</span><br><span class="line">    con.commit()</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;con&quot;</span> <span class="keyword">in</span> <span class="built_in">dir</span>():</span><br><span class="line">        con.rollback()</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>

<h5 id="connector删除数据"><a href="#connector删除数据" class="headerlink" title="connector删除数据"></a>connector删除数据</h5><p>两种方法：1、DELETE FROM …..     2.TRUNCATE TABLE ….. 这种方法不需要创建事务</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector.pooling</span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="string">&quot;port&quot;</span>: <span class="number">3306</span>,</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;dx991108..&quot;</span>,</span><br><span class="line">    <span class="string">&quot;database&quot;</span>: <span class="string">&quot;demo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    pool = mysql.connector.pooling.MySQLConnectionPool(</span><br><span class="line">        **config,</span><br><span class="line">        pool_size=<span class="number">10</span></span><br><span class="line">    )</span><br><span class="line">    con = pool.get_connection()</span><br><span class="line">    <span class="comment">#con.start_transaction()</span></span><br><span class="line">    cursor = con.cursor()</span><br><span class="line">    <span class="comment">#sql = &quot;DELETE e,d FROM t_emp e JOIN t_dept d ON e.deptno = d.deptno &quot; \</span></span><br><span class="line">    <span class="comment">#      &quot;WHERE d.deptno = 20&quot;</span></span><br><span class="line">    sql = <span class="string">&quot;TRUNCATE TABLE t_emp&quot;</span></span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    <span class="comment">#con.commit()</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="comment">#if &quot;con&quot; in dir():</span></span><br><span class="line">      <span class="comment">#  con.rollback()</span></span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>

<h5 id="循环执行sql语句"><a href="#循环执行sql语句" class="headerlink" title="循环执行sql语句"></a>循环执行sql语句</h5><p>游标对象中的executemany()函数可以反复执行一条sql语句</p>
<p>同样也可以用for循环执行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector.pooling</span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="string">&quot;port&quot;</span>: <span class="number">3306</span>,</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;dx991108..&quot;</span>,</span><br><span class="line">    <span class="string">&quot;database&quot;</span>: <span class="string">&quot;demo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    pool = mysql.connector.pooling.MySQLConnectionPool(</span><br><span class="line">        **config,</span><br><span class="line">        pool_size=<span class="number">10</span></span><br><span class="line">    )</span><br><span class="line">    con = pool.get_connection()</span><br><span class="line">    con.start_transaction()</span><br><span class="line">    cursor = con.cursor()</span><br><span class="line">    sql = <span class="string">&quot;INSERT INTO t_dept(deptno, dname, loc) VALUES(%s,%s,%s)&quot;</span></span><br><span class="line">    data = [</span><br><span class="line">        [<span class="number">100</span>, <span class="string">&quot;A部门&quot;</span>, <span class="string">&quot;北京&quot;</span>], [<span class="number">110</span>, <span class="string">&quot;B部门&quot;</span>, <span class="string">&quot;上海&quot;</span>]</span><br><span class="line">    ]</span><br><span class="line">    cursor.executemany(sql, data)</span><br><span class="line">    con.commit()</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;con&quot;</span> <span class="keyword">in</span> <span class="built_in">dir</span>():</span><br><span class="line">        con.rollback()</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>

<h3 id="mysql主从同步配置"><a href="#mysql主从同步配置" class="headerlink" title="mysql主从同步配置"></a>mysql主从同步配置</h3><ul>
<li>主服务器（master） </li>
<li>从服务器（slave） </li>
<li>实现读写分离，数据备份、负载均衡</li>
</ul>
<h5 id="数据库备份与恢复"><a href="#数据库备份与恢复" class="headerlink" title="数据库备份与恢复"></a>数据库备份与恢复</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 备份 运行mysqldump命令  (<span class="operator">&gt;</span>)为重定向 将数据库备份到名为python.sql的文件中</span><br><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>p 数据库名称 <span class="operator">&gt;</span> python.sql</span><br><span class="line"></span><br><span class="line"># 恢复 连接mysql 创建新的数据库 退出连接</span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p 新数据库名称 <span class="operator">&lt;</span> python.sql</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">georgexia</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/07/09/db/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/">http://example.com/2022/07/09/db/MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">georgexia</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/15/db/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/" title="Redis数据库"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Redis数据库</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/20/python/mini-web%E6%A1%86%E6%9E%B6/" title="mini-web框架"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">mini-web框架</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">georgexia</div><div class="author-info__description">guard against arrogance</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">welcome to my blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">MySQL数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%90%8D%E8%AF%8D%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">部分名词概念</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#DBMS"><span class="toc-number">1.1.1.</span> <span class="toc-text">DBMS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#RDBMS"><span class="toc-number">1.1.2.</span> <span class="toc-text">RDBMS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E8%A8%80%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.3.</span> <span class="toc-text">语言分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.1.4.</span> <span class="toc-text">SQL注意事项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DDL%E8%AF%AD%E5%8F%A5-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80"><span class="toc-number">1.1.5.</span> <span class="toc-text">DDL语句(数据定义语言)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%8C%83%E5%BC%8F%EF%BC%886%E4%B8%AA%E8%8C%83%E5%BC%8F%EF%BC%89%EF%BC%88%E5%8D%B3%E4%B8%80%E4%BA%9B%E8%A7%84%E5%88%99%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">数据库的范式（6个范式）（即一些规则）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E6%9C%BA%E5%88%B6"><span class="toc-number">3.</span> <span class="toc-text">索引机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">3.0.1.</span> <span class="toc-text">如何创建索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E6%88%96%E8%80%85%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">3.0.2.</span> <span class="toc-text">如何添加或者删除索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95"><span class="toc-number">3.0.3.</span> <span class="toc-text">查看索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">3.0.4.</span> <span class="toc-text">删除索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-number">3.0.5.</span> <span class="toc-text">索引使用原则</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.</span> <span class="toc-text">查询语句</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E9%A1%B5%EF%BC%88limit%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%89"><span class="toc-number">4.0.1.</span> <span class="toc-text">数据分页（limit关键字）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C%E9%9B%86%E6%8E%92%E5%BA%8F-%EF%BC%88ORDER-BY-%E5%AD%90%E5%8F%A5%EF%BC%89"><span class="toc-number">4.0.2.</span> <span class="toc-text">结果集排序  （ORDER BY 子句）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E7%BB%93%E6%9E%9C%E9%9B%86%E4%B8%AD%E7%9A%84%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%EF%BC%88distinct%EF%BC%89"><span class="toc-number">4.0.3.</span> <span class="toc-text">去除结果集中的重复记录（distinct）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%EF%BC%88WHERE-%E5%AD%90%E5%8F%A5%EF%BC%89"><span class="toc-number">4.0.4.</span> <span class="toc-text">条件查询（WHERE 子句）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E4%B8%8Enull%E5%80%BC%E7%9A%84%E8%BF%90%E7%AE%97-%E5%85%A8%E4%B8%BAnull"><span class="toc-number">4.0.5.</span> <span class="toc-text">数字与null值的运算 全为null</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">4.0.6.</span> <span class="toc-text">比较运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">4.0.7.</span> <span class="toc-text">逻辑运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%8C%89%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-number">4.0.8.</span> <span class="toc-text">二进制按位运算</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">4.0.9.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2%EF%BC%88GROUP-BY%EF%BC%89"><span class="toc-number">4.0.10.</span> <span class="toc-text">分组查询（GROUP BY）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%90%AB%E6%9C%89GROUP-BY-%E7%9A%84%E5%AD%90%E5%8F%A5%E4%B8%AD-SELECT-%E5%AD%90%E5%8F%A5%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">4.0.11.</span> <span class="toc-text">在含有GROUP BY 的子句中 SELECT 子句注意事项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HAVING-%E5%AD%90%E5%8F%A5"><span class="toc-number">4.0.12.</span> <span class="toc-text">HAVING 子句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B8%A9%E5%9D%91%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">4.0.13.</span> <span class="toc-text">踩坑注意事项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.</span> <span class="toc-text">表连接</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A1%A8%E8%BF%9E%E6%8E%A5%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.0.1.</span> <span class="toc-text">表连接类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E5%A4%9A%E7%A7%8D%E8%AF%AD%E6%B3%95%E5%BD%A2%E5%BC%8F"><span class="toc-number">5.0.2.</span> <span class="toc-text">内连接多种语法形式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%E5%A4%9A%E7%A7%8D%E5%BD%A2%E5%BC%8F"><span class="toc-number">5.0.3.</span> <span class="toc-text">外连接多种形式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">SQL练习题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#INSERT-%E8%AF%AD%E5%8F%A5"><span class="toc-number">8.</span> <span class="toc-text">INSERT 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#INSERT%E8%AF%AD%E5%8F%A5%E6%96%B9%E8%A8%80"><span class="toc-number">8.0.1.</span> <span class="toc-text">INSERT语句方言</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IGNORE%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">8.0.2.</span> <span class="toc-text">IGNORE关键字</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#update%E8%AF%AD%E5%8F%A5"><span class="toc-number">9.</span> <span class="toc-text">update语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DELETE%E8%AF%AD%E5%8F%A5"><span class="toc-number">10.</span> <span class="toc-text">DELETE语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%87%BD%E6%95%B0"><span class="toc-number">11.</span> <span class="toc-text">数字函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">12.</span> <span class="toc-text">日期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%87%BD%E6%95%B0"><span class="toc-number">13.</span> <span class="toc-text">日期格式化函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%81%8F%E7%A7%BB%E5%87%BD%E6%95%B0"><span class="toc-number">14.</span> <span class="toc-text">日期偏移函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0"><span class="toc-number">15.</span> <span class="toc-text">字符函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6"><span class="toc-number">16.</span> <span class="toc-text">数据库的事务机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6-transaction"><span class="toc-number">16.0.1.</span> <span class="toc-text">事务机制(transaction)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1"><span class="toc-number">16.0.2.</span> <span class="toc-text">管理事务</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84ACID%E5%B1%9E%E6%80%A7"><span class="toc-number">16.0.3.</span> <span class="toc-text">事务的ACID属性</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number"></span> <span class="toc-text">事务的隔离级别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%A4%87%E4%BB%BD%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">0.0.1.</span> <span class="toc-text">数据导出与备份的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5"><span class="toc-number">0.0.2.</span> <span class="toc-text">数据导出导入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E4%B8%8Epython%E4%BA%A4%E4%BA%92"><span class="toc-number">1.</span> <span class="toc-text">mysql与python交互</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.0.1.</span> <span class="toc-text">创建连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%B8%E6%A0%87-cursor"><span class="toc-number">1.0.2.</span> <span class="toc-text">游标(cursor)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#connector%E6%8F%90%E4%BE%9B%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0-%E5%BF%85%E9%A1%BB%E6%89%8B%E5%8A%A8%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.0.3.</span> <span class="toc-text">connector提供的事务控制函数(必须手动提交事务)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF%E6%84%8F%E4%B9%89%EF%BC%88Connection-Pool%EF%BC%89"><span class="toc-number">1.0.4.</span> <span class="toc-text">数据库连接技术意义（Connection Pool）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E8%AF%AD%E6%B3%95"><span class="toc-number">1.0.5.</span> <span class="toc-text">数据库连接池语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#connector%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.0.6.</span> <span class="toc-text">connector删除数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E6%89%A7%E8%A1%8Csql%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.0.7.</span> <span class="toc-text">循环执行sql语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">mysql主从同步配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-number">2.0.1.</span> <span class="toc-text">数据库备份与恢复</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/12/backend/RabbitMQ/" title="RabbitMQ">RabbitMQ</a><time datetime="2024-01-12T07:39:20.000Z" title="发表于 2024-01-12 15:39:20">2024-01-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/25/python/django%E5%9B%BD%E9%99%85%E5%8C%96/" title="django-translation插件">django-translation插件</a><time datetime="2023-12-25T06:37:20.000Z" title="发表于 2023-12-25 14:37:20">2023-12-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/25/front/ant-design-vue3/" title="ant-design-vue">ant-design-vue</a><time datetime="2023-08-25T09:42:10.000Z" title="发表于 2023-08-25 17:42:10">2023-08-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/25/front/NodeJS/" title="NodeJS知识">NodeJS知识</a><time datetime="2023-06-25T14:17:12.000Z" title="发表于 2023-06-25 22:17:12">2023-06-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/20/front/ES6/" title="ES6知识">ES6知识</a><time datetime="2023-06-20T10:37:10.000Z" title="发表于 2023-06-20 18:37:10">2023-06-20</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By georgexia</div><div class="footer_custom_text">Hi,  welcome to my blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>